<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Halaman Profil</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f7fb;
      margin: 0;
      padding: 0;
    }

    .profile-container {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 250px;
      background-color: #fff;
      border-right: 1px solid #ddd;
      display: flex;
      flex-direction: column;
    }

    .sidebar button {
      padding: 15px;
      color: #333;
      text-align: left;
      border: none;
      background: none;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: 0.3s;
      font-size: 15px;
    }

    .sidebar button:hover {
      background-color: #f0f0f0;
    }

    .sidebar button.active {
      background-color: #3498db;
      color: #fff;
    }

    .content {
      flex: 1;
      padding: 30px;
      background: #fff;
      margin: 20px;
      border-radius: 10px;
    }

    .hidden {
      display: none;
    }

    .upload-section {
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-pic {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      margin-bottom: 10px;
    }

    .upload-btn {
      background-color: #3498db;
      color: #fff;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .btn-group {
      margin-top: 20px;
    }

    button.cancel, button.save {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button.cancel {
      background-color: #e74c3c;
      color: #fff;
    }

    button.save {
      background-color: #3498db;
      color: #fff;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <div class="profile-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <button class="active" data-section="profil">Informasi Profil</button>
      <button data-section="password">Ganti Kata Sandi</button>
      <button data-section="lainnya">Informasi Lainnya</button>
      <button data-section="sosmed">Sosial Media</button>
    </aside>

    <!-- Main Content -->
    <main class="content">
      <!-- Informasi Profil -->
      <section id="profil">
        <h2>Informasi Profil</h2>

        <div class="upload-section">
          <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Foto Profil" class="profile-pic" id="profilePic">
          <br>
          <button class="upload-btn" id="uploadBtn">Unggah Foto Profil</button>
          <input type="file" id="uploadInput" accept="image/*" style="display:none;">
        </div>

        <form id="profilForm">
          <label>Nama Lengkap</label>
          <input type="text" id="nama">

          <label>NIM</label>
          <input type="text" id="nim">

          <label>Email</label>
          <input type="email" id="email">

          <label>Jurusan</label>
          <input type="text" id="jurusan">

          <div class="btn-group">
            <button type="button" class="save" id="saveProfil">Simpan</button>
          </div>
        </form>
      </section>

      <!-- Ganti Kata Sandi -->
      <section id="password" class="hidden">
        <h2>Ganti Kata Sandi</h2>
        <form id="passwordForm">
          <label>Kata Sandi Lama</label>
          <input type="password" id="oldPass">

          <label>Kata Sandi Baru</label>
          <input type="password" id="newPass">

          <label>Konfirmasi Kata Sandi</label>
          <input type="password" id="confirmPass">

          <div class="btn-group">
            <button type="reset" class="cancel">Batal</button>
            <button type="button" class="save" id="savePass">Simpan</button>
          </div>
        </form>
      </section>

      <!-- Informasi Lainnya -->
      <section id="lainnya" class="hidden">
        <h2>Informasi Lainnya</h2>
        <form id="infoForm">
          <label>Deskripsi Diri</label>
          <textarea id="deskripsi" rows="3"></textarea>

          <label>Riwayat Pendidikan SMA</label>
          <input type="text" id="sma">

          <label>Universitas</label>
          <input type="text" id="univ">

          <label>Prestasi</label>
          <textarea id="prestasi" rows="2"></textarea>

          <div class="btn-group">
            <button type="button" class="save" id="saveInfo">Simpan</button>
          </div>
        </form>
      </section>

      <!-- Sosial Media -->
      <section id="sosmed" class="hidden">
        <h2>Sosial Media</h2>
        <form id="sosmedForm">
          <label>LinkedIn</label>
          <input type="text" id="linkedin">

          <label>Instagram</label>
          <input type="text" id="instagram">

          <label>Whatsapp</label>
          <input type="text" id="Whatsapp">

          <div class="btn-group">
            <button type="button" class="save" id="saveSosmed">Simpan</button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <script>
    // ======================
    // AMBIL DATA USER DARI LOCALSTORAGE
    // ======================
    let user = JSON.parse(localStorage.getItem("loggedUser")) || {};

    // Isi nilai default kalau belum ada
    user = {
      nim: user.nim || "3312301079",
      nama: user.nama || "Nama Default",
      email: user.email || "email@contoh.com",
      jurusan: user.jurusan || "Belum diatur",
      foto: user.foto || "https://cdn-icons-png.flaticon.com/512/149/149071.png",
      deskripsi: user.deskripsi || "",
      sma: user.sma || "",
      univ: user.univ || "",
      prestasi: user.prestasi || "",
      linkedin: user.linkedin || "",
      instagram: user.instagram || ""
    };

    // ======================
    // TAMPILKAN DATA DI FORM
    // ======================
    document.getElementById("nim").value = user.nim;
    document.getElementById("nama").value = user.nama;
    document.getElementById("email").value = user.email;
    document.getElementById("jurusan").value = user.jurusan;
    document.getElementById("profilePic").src = user.foto;
    document.getElementById("deskripsi").value = user.deskripsi;
    document.getElementById("sma").value = user.sma;
    document.getElementById("univ").value = user.univ;
    document.getElementById("prestasi").value = user.prestasi;
    document.getElementById("linkedin").value = user.linkedin;
    document.getElementById("instagram").value = user.instagram;
    document.getElementById("whatsapp").value = user.whatsapp;

    // ======================
    // SIMPAN PROFIL
    // ======================
    document.getElementById("saveProfil").addEventListener("click", () => {
      user.nama = document.getElementById("nama").value;
      user.nim = document.getElementById("nim").value;
      user.email = document.getElementById("email").value;
      user.jurusan = document.getElementById("jurusan").value;
      localStorage.setItem("loggedUser", JSON.stringify(user));
      alert("✅ Data profil berhasil disimpan!");
    });

    // ======================
    // SIMPAN INFORMASI LAINNYA
    // ======================
    document.getElementById("saveInfo").addEventListener("click", () => {
      user.deskripsi = document.getElementById("deskripsi").value;
      user.sma = document.getElementById("sma").value;
      user.univ = document.getElementById("univ").value;
      user.prestasi = document.getElementById("prestasi").value;
      localStorage.setItem("loggedUser", JSON.stringify(user));
      alert("✅ Informasi lainnya berhasil disimpan!");
    });

    // ======================
    // SIMPAN SOSIAL MEDIA
    // ======================
    document.getElementById("saveSosmed").addEventListener("click", () => {
      user.linkedin = document.getElementById("linkedin").value;
      user.instagram = document.getElementById("instagram").value;
      user.instagram = document.getElementById("whatsapp").value;
      localStorage.setItem("loggedUser", JSON.stringify(user));
      alert("✅ Sosial media berhasil disimpan!");
    });

    // ======================
    // UPLOAD FOTO PROFIL
    // ======================
    const uploadBtn = document.getElementById("uploadBtn");
    const uploadInput = document.getElementById("uploadInput");
    const profilePic = document.getElementById("profilePic");

    uploadBtn.addEventListener("click", () => uploadInput.click());
    uploadInput.addEventListener("change", function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          profilePic.src = e.target.result;
          user.foto = e.target.result;
          localStorage.setItem("loggedUser", JSON.stringify(user));
        };
        reader.readAsDataURL(file);
      }
    });

    // ======================
    // NAVIGASI SIDEBAR
    // ======================
    const buttons = document.querySelectorAll(".sidebar button");
    const sections = document.querySelectorAll("main section");
    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        buttons.forEach(b => b.classList.remove("active"));
        sections.forEach(s => s.classList.add("hidden"));
        btn.classList.add("active");
        document.getElementById(btn.dataset.section).classList.remove("hidden");
      });
    });
  </script>
</body>
</html>
